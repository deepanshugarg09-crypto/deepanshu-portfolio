<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Annotate Telemetry Events | Deepanshu Garg</title>

<style>
body{
  margin:0;
  font-family:Inter,system-ui;
  background:#0b0f19;
  color:#e5e7eb;
}

/* Layout */
.container{
  max-width:960px;
  margin:auto;
  padding:40px 20px;
}

h1{
  margin-bottom:6px;
}

h2{
  color:#60a5fa;
  margin-top:30px;
}

.back{
  color:#60a5fa;
  text-decoration:none;
  display:inline-block;
  margin-bottom:20px;
}

/* Scale Callout */
.scale{
  color:#9ca3af;
  font-size:0.95rem;
  margin-bottom:14px;
}

/* Tags */
.tags{
  margin:10px 0 20px 0;
}

.tag{
  display:inline-block;
  background:#1f2937;
  color:#cbd5f5;
  padding:4px 10px;
  border-radius:6px;
  font-size:0.72rem;
  margin:3px 6px 0 0;
}

/* Card */
.card{
  background:#111827;
  padding:22px;
  border-radius:12px;
  border:1px solid #1f2937;
}

/* Diagram */
img{
  max-width:100%;
  border-radius:10px;
  margin-top:15px;
  border:1px solid #1f2937;
}

/* Architecture list */
.arch-list{
  line-height:1.75;
  padding-left:22px;
}

.arch-list li{
  margin-bottom:10px;
}
</style>
</head>

<body>
<div class="container">

<a class="back" href="../index.html">← Back to Portfolio</a>

<h1>Annotate Telemetry Events</h1>

<!-- Scale Callout -->
<div class="scale">
Production system handling telemetry signals from millions of Windows endpoints
</div>

<!-- Architectural Tags -->
<div class="tags">
  <span class="tag">C++</span>
  <span class="tag">Windows Internals</span>
  <span class="tag">Telemetry</span>
  <span class="tag">Concurrency</span>
  <span class="tag">SQLite</span>
  <span class="tag">Diagnostics</span>
</div>

<div class="card">

<h2>What this solution does</h2>
<p>
We have telemetry events raised by different windows services from millions of devices which we use to analyze the behaviour of our product and improve as and when a trend shows anomoly.
Now there are certain noisy events which gets raised for obvious reasons like network is down, network is flapping, system is modern stand by. We wanted to filter such a noisy events 
and by knowing the system state at the time when telemetry event was raised. That where this requirement came up and we built this system
</p>

<h2>Architecture Diagram</h2>
<img src="annotateevents.png" alt="Annotate Telemetry Events">

<h2>Architectural Description</h2>
<ul class="arch-list">
  <li><b>Singleton state tracking engine</b> — monitors OS-level environment changes (network, sleep/power, user sessions) via platform-specific monitors</li>
  
  <li><b>Thread-safe event ingestion</b> — state change events flow through a concurrent queue to a dedicated worker thread, decoupling producers from persistence</li>
  
  <li><b>SQLite-backed persistence</b> — events are stored locally with auto-purge (max 20K rows, cleanup every 2K insertions) to bound disk usage</li>
  
  <li><b>Query processor</b> — external consumers query system state at time <i>T</i> and receive annotated responses (network/sleep/session state + transitioning flag)</li>
  
  <li><b>Cloud-gated activation</b> — library activates only when diagnostics and event annotation feature flags are enabled via cloud policy</li>
</ul>

</div>
</div>
</body>
</html>
